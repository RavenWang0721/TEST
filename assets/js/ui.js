var UI=UI||{},UTIL=UTIL||{},scroller=".smooth-scroll";gsap.registerPlugin(ScrollTrigger);var locoScroll=new LocomotiveScroll({el:document.querySelector(".smooth-scroll"),smooth:!0,getDirection:!0,getSpeed:!0,multiplier:.7,reloadOnContextChange:!0,tablet:{smooth:!0,direction:"vertical",gestureDirection:"vertical",breakpoint:768},smartphone:{smooth:!0,direction:"vertical",gestureDirection:"vertical"}});locoScroll.on("scroll",ScrollTrigger.update),ScrollTrigger.scrollerProxy(".smooth-scroll",{scrollTop(e){var t=locoScroll.scroll.instance.scroll.y;return arguments.length?locoScroll.scrollTo(e,0,0):t},getBoundingClientRect:()=>({top:0,left:0,width:window.innerWidth,height:window.innerHeight}),pinType:document.querySelector(".smooth-scroll").style.transform?"transform":"fixed"}),ScrollTrigger.addEventListener("refresh",(()=>locoScroll.update())),ScrollTrigger.refresh(),UTIL.once=function(e,t){var o;return function(){return e&&(o=e.apply(t||this,arguments),e=null),o}};var once_locoScroll_updte=UTIL.once((function(){setTimeout((function(){locoScroll.update()}),10)}));UI.aboutNav=function(e){var t=$(this).outerHeight(!0),o=$(this).position().top,i=$(".header").innerHeight();e+i>o+t?($(this).addClass("is-fixed"),$(this).prependTo($("body")),once_locoScroll_updte()):($(this).removeClass("is-fixed"),$(this).insertBefore($(".about-vision")));var n=$("#aboutVision").position().top,s=$("#aboutHistory").position().top,a=$("#aboutTeam").position().top,r=e+t+i+$(".about__tit").height(),l=function(){$(".about-nav__link").removeClass("on")};r>n&&(l(),$(".about-nav__link--vision").addClass("on")),r>s&&(l(),$(".about-nav__link--history").addClass("on")),r>a&&(l(),$(".about-nav__link--team").addClass("on"))},UI.navBtn=function(){var e=$(".header");$(".header-gnb").on("click",(function(){$(this).toggleClass("on").next(".header-menu-view").toggleClass("is-active"),e.hasClass("is-black")&&e.toggleClass("is-white")}))},UI.navMenu=function(){var e=$(".header-menu-view"),t=(e.find(".menu-item"),e.find(".menu-link")),o=e.find(".menu-container");return{init:function(){this.bindEvents()},bindEvents:function(){t.on("mouseover",(function(){$(this).find(o).addClass("is-animate")})),t.on("mouseout",(function(){$(this).find(o).removeClass("is-animate")}))}}}(),UI.scrollIndicator=function(e){var t=$("[data-js=scroll-indicator]");t.css({transform:"rotate("+e/2+"deg)"}),$(window).innerHeight()+e>$(".footer").position().top?t.fadeOut():t.fadeIn()},UI.pop=function(){var e=$("[data-js=popup]"),t=$("[data-js=pop-close]"),o=null,i=$(".c-scrollbar").eq(0);return{init:function(){this.bindEvents()},bindEvents:function(){var o=this;t.on("click",(function(){var t=$(this).parents(e).data("js-pop-id");o.close(t)}))},open:function(e){var t=$("[data-js-pop-id="+e+"]"),n=t.find(".smooth-scroll-popup"),s=n.hasClass("is-state-ready");t.addClass("is-active"),n.each((function(e,t){o=new LocomotiveScroll({el:t,smooth:!0,getDirection:!0,getSpeed:!0,multiplier:.7})})),i.hide(),s&&o.stop()},close:function(e){$("[data-js-pop-id="+e+"]").removeClass("is-active"),o.destroy(),i.show()}}}(),UI.Mask=function(e,t){var o=function(e,t){this.el=e,this.timer=null,this.mouseX=0,this.mouseY=0,this.xp=0,this.yp=0,this.size=t||140,this.color=null,this.init()};return o.prototype.init=function(){this.memoize()},o.prototype.memoize=function(){var e=this;e.$maskArea=$(this.el),e.$circle=e.$maskArea.find(".mask"),e.bindEvents()},o.prototype.bindEvents=function(){var e=this;e.$maskArea.each((function(){var t=$(this),o=$(this).find(e.$circle);t.on("mousemove",(function(t){e.mouseX=t.offsetX-e.size,e.mouseY=t.offsetY-e.size,o.addClass("on"),e.xp+=(e.mouseX-e.xp)/6,e.yp+=(e.mouseY-e.yp)/6,o.css({left:e.xp+"px",top:e.yp+"px"})})),t.on("mouseleave",(function(){o.removeClass("on")}))}))},o.prototype.setColors=function(){this.$circle.each((function(){var e=$(this),t=e.data("js-mask-color");e.css({"background-color":t})}))},o}(),UI.loader=function(){var e=gsap.utils.toArray("img"),t=document.querySelector(".loader__text"),o=document.querySelector(".loader__progress"),i=function(i){var n=Math.round(100*i.progressedCount/e.length);t.textContent=n+"%",o.style.transform="translate3d("+n+"%, 0, 0)"},n=function(){gsap.to(document.querySelector(".loader"),{autoAlpha:0,duration:.5}),setTimeout((function(){$("[data-js=animate]").addClass("animate__animated")}),10),setTimeout((function(){UI.contactNotice()}),1e3)};$("#main").length>0?setTimeout((function(){imagesLoaded(e,{background:!0}).on("progress",i).on("always",n)}),1e3):imagesLoaded(e,{background:!0}).on("progress",i).on("always",n)},UI.proejctsSwiper=function(e){var t=$(e).closest(".custom-swiper"),o=t.find(".progress"),i=(t.find(".progress-sections"),t.find(".swiper-btn-stop")),n=t.find(".swiper-btn-play"),s=null,a=null,r=function(e){return(s.realIndex+1)/a*270+"%"},l=UTIL.once((function(){s.slides[s.loopedSlides-1].style.visibility="visible"})),c=new Swiper(e,{loop:!0,slideToClickedSlide:!1,spaceBetween:40,slidesPerView:"auto",loopedSlides:6,preloadImages:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},on:{init:function(){s=this,a=this.params.loop?this.slides.length-2:this.slides.length,o.css({width:r()}),s.slides[s.loopedSlides-1].style.visibility="hidden"},slideChange:function(){o.stop().animate({width:r()},300,"linear"),l()}}});return i.on("click",(function(){s.autoplay.stop()})),n.on("click",(function(){s.autoplay.start()})),c},UI.projectLists=function(){var e=$(".projects-more"),t=$(".projects-more__header"),o=e.find(".table").find(".tr"),i=e.find(".btn-more"),n=e.find(".tab-link > a"),s=o,a=$("[data-js-category=web]"),r=$("[data-js-category=app]"),l="all";return{init:function(){this.itemsReset(),this.addItems(s),this.bindEvents()},bindEvents:function(){var e=this;n.on("click",(function(){var t=$(this).data("js-category-tit");switch(e.itemsReset(),t){case"all":e.addItems(s);break;case"web":e.addItems(a);break;case"app":e.addItems(r)}l=t,n.removeClass("on"),$(this).addClass("on"),e.scrollMove()})),i.on("click",(function(){switch(l){case"all":e.filterCategory(s),e.checkHideBtnMore(s);break;case"web":e.filterCategory(a),e.checkHideBtnMore(a);break;case"app":e.filterCategory(r),e.checkHideBtnMore(r)}locoScroll.update()}))},itemsReset:function(){s.hide()},filterCategory:function(e){var t=this;if(t.is_hidden_items(e)){var o=e.filter(":visible").length;t.addItems(e,o+t.calculate_len(o))}},addItems:function(e,t){t=t||10;e.slice(0,t).show(),this.is_hidden_items(e)?i.show():i.hide()},checkHideBtnMore:function(e){this.is_hidden_items(e)||i.hide()},is_hidden_items:function(e){return e.filter(":hidden").length>0},calculate_len:function(e){return 10*Math.floor(e/10)},scrollMove:function(){var o=e.position().top,i=t.outerHeight();locoScroll.scrollTo(o,{offset:-i,duration:100}),locoScroll.update()}}}(),UI.contactNotice=function(){var e=".contact-notice";if(0!==$(e).length){var t=$(window).height()-$(e).innerHeight()-64,o=gsap.timeline({repeat:0,ease:Quad.easeInOut});o.to(e,{top:t,duration:1,alpha:1}).to(e,{y:"-=10",duration:.1,repeat:5,yoyo:!0,delay:.5}),o.eventCallback("onComplete",(function(){$(e).delay(1e3).fadeOut(1e3)}))}},$("[data-js=about-nav__link]").on("click",(function(e){e.preventDefault();var t=$(".about-nav"),o=document.querySelector($(this)[0].hash),i=$(".header").innerHeight(),n=t.hasClass("is-fixed"),s=null,a=i+t.outerHeight();s=n?a:a+t.outerHeight(!0),locoScroll.scrollTo(o,{offset:-s,duration:100})})),$(".about-history-detail").each((function(){$(this).find(".swiper-container").each((function(e,t){new Swiper(t,{slidesPerView:"auto",spaceBetween:70,observer:!0,observeParents:!0,freeMode:!0})}));var e=$(this).find(".about-history-detail__tabBtn"),t=$(this).find(".about-history-detail__con");e.on("click",(function(){e.removeClass("on"),$(this).addClass("on");var o=$(this).index();t.hide(),t.eq(o).show(),locoScroll.update()}))})),$(".footer-partners").marquee({startVisible:!0,gap:200,delayBeforeStart:0,direction:"left",duplicated:!0,duration:1e4}),$(".footer").hasClass("is-main-type")||$(".footer-partners-item").each((function(){var e=$("img",this);e.attr("src",e.attr("src").replace(".png","_sub.png"))})),$(".accordian-wrap").each((function(){$(this).on("click",".tit",(function(){var e=$(this).closest("li"),t=e.hasClass("on"),o=e.position().top-$(".header").outerHeight()-1;t?(e.removeClass("on"),e.find(".con").stop().slideUp(150,(function(){setTimeout((function(){locoScroll.update()}),400)}))):(e.addClass("on"),e.find(".con").stop().slideDown(150,(function(){locoScroll.update(),setTimeout((function(){locoScroll.scrollTo(o,{duration:150,callback:function(){}})}),150)})))}))})),locoScroll.on("scroll",(function(e){var t=e.scroll.y;$("[data-js=scroll-indicator]").each((function(){UI.scrollIndicator(t)})),$(".about-nav").each((function(){UI.aboutNav.call(this,t)}))})),locoScroll.on("call",(function(e,t,o){"awardField"===e&&("enter"===t?o.el.classList.add("is-grey"):o.progress<0&&o.el.classList.remove("is-grey"))})),function(){if(0!==$(".about").length){var e=document.querySelector(".about-team__msgLight"),t=gsap.timeline({scrollTrigger:{trigger:e,scroller:scroller,start:"top bottom",end:"top top"}});t.to(".about-team__msgCount",{backgroundColor:"#777",duration:.3,stagger:.3,ease:Power4.easeInOut}).to(e,{alpha:0,duration:.5},"+=.1"),t.eventCallback("onComplete",(function(){e.style.display="none",gsap.to(".about-team__msg",{alpha:1,display:"block",duration:1.5,yPercent:-20,ease:Power4.easeInOut,stagger:{each:1,onComplete:function(){locoScroll.update()}}})}))}}(),UI.navBtn(),UI.navMenu.init(),UI.pop.init();var projectsSwiper=UI.proejctsSwiper("#projects-slide .swiper-container"),maskInst=new UI.Mask("[data-js=mask]");UI.projectLists.init(),UI.loader();